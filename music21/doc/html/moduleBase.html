<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>music21.base &mdash; music21 v0.2.4a1 documentation</title>
    <link rel="stylesheet" href="_static/music21doc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2.4a1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="music21 v0.2.4a1 documentation" href="index.html" />
    <link rel="next" title="music21.clef" href="moduleClef.html" />
    <link rel="prev" title="Glossary" href="glossary.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="moduleClef.html" title="music21.clef"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             accesskey="P">previous</a> |</li>
        <li><a href="contents.html">music21 v0.2.4a1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">music21.base</a><ul>
<li><a class="reference external" href="#music21object">Music21Object</a></li>
<li><a class="reference external" href="#elementwrapper">ElementWrapper</a></li>
<li><a class="reference external" href="#definedcontexts">DefinedContexts</a></li>
<li><a class="reference external" href="#groups">Groups</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="glossary.html"
                                  title="previous chapter">Glossary</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="moduleClef.html"
                                  title="next chapter">music21.clef</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/moduleBase.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-music21.base">
<span id="modulebase"></span><h1>music21.base<a class="headerlink" href="#module-music21.base" title="Permalink to this headline">¶</a></h1>
<p>Music21 base classes and important utilities. base &#8211; the convention within music21 is that __init__ files contain: from base import * so everything in this file can be accessed as music21.XXXX</p>
<div class="section" id="music21object">
<h2>Music21Object<a class="headerlink" href="#music21object" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="music21.base.Music21Object">
<em class="property">
class </em><tt class="descclassname">music21.base.</tt><tt class="descname">Music21Object</tt><a class="headerlink" href="#music21.base.Music21Object" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all music21 objects. All music21 objects encode 7 pieces of information: (1) id        : unique identification string (optional) (2) groups    : a Groups object: which is a list of strings identifying internal subcollections (voices, parts, selections) to which this element belongs (3) duration  : Duration object representing the length of the object (4) locations : a DefinedContexts object (see above) that specifies connections of this object to one location in another object (5) parent    : a reference or weakreference to a currently active Location (6) offset    : a float or duration specifying the position of the object in parent (7) contexts  : a list of references or weakrefs for current contexts of the object (similar to locations but without an offset) (8) priority  : int representing the position of an object among all objects at the same offset.</p>
<p>Each of these may be passed in as a named keyword to any music21 object. Some of these may be intercepted by the subclassing object (e.g., duration within Note)</p>
<p><strong>Music21Object</strong> <strong>attributes</strong></p>
<dl class="attribute">
<dt id="music21.base.Music21Object.id">
<tt class="descname">id</tt><a class="headerlink" href="#music21.base.Music21Object.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Unique identification string.</p>
<dl class="attribute">
<dt id="music21.base.Music21Object.groups">
<tt class="descname">groups</tt><a class="headerlink" href="#music21.base.Music21Object.groups" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>An instance of a Group object.</p>
<p><strong>Music21Object</strong> <strong>properties</strong></p>
<dl class="attribute">
<dt id="music21.base.Music21Object.duration">
<tt class="descname">duration</tt><a class="headerlink" href="#music21.base.Music21Object.duration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Get and set the duration of this object as a Duration object.</p>
<dl class="attribute">
<dt id="music21.base.Music21Object.offset">
<tt class="descname">offset</tt><a class="headerlink" href="#music21.base.Music21Object.offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The offset property sets the position of this object from the start of its container (a Stream or Stream sub-class) in quarter lengths.</p>
<dl class="attribute">
<dt id="music21.base.Music21Object.parent">
<tt class="descname">parent</tt><a class="headerlink" href="#music21.base.Music21Object.parent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>A reference to the most-recent object used to contain this object. In most cases, this will be a Stream or Stream sub-class. In most cases, an object&#8217;s parent attribute is automatically set when an the object is attached to a Stream.</p>
<dl class="attribute">
<dt id="music21.base.Music21Object.priority">
<tt class="descname">priority</tt><a class="headerlink" href="#music21.base.Music21Object.priority" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Get and set the priority integer value. Priority specifies the order of processing from left (lowest number) to right (highest number) of objects at the same offset.  For instance, if you want a key change and a clef change to happen at the same time but the key change to appear first, then set: keySigElement.priority = 1; clefElement.priority = 2 this might be a slightly counterintuitive numbering of priority, but it does mean, for instance, if you had two elements at the same offset, an allegro tempo change and an andante tempo change, then the tempo change with the higher priority number would apply to the following notes (by being processed second). Default priority is 0; thus negative priorities are encouraged to have Elements that appear non-priority set elements. In case of tie, there are defined class sort orders defined in music21.stream.CLASS_SORT_ORDER.  For instance, a key signature change appears before a time signature change before a note at the same offset.  This produces the familiar order of materials at the start of a musical score.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mf">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="s">&#39;high&#39;</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="nc">ElementException</span>: <span class="n-Identifier">priority values must be integers.</span>
</pre></div>
</div>
<p><strong>Music21Object</strong> <strong>methods</strong></p>
<dl class="method">
<dt id="music21.base.Music21Object.__init__">
<tt class="descname">__init__</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.Music21Object.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>No documentation.</p>
<dl class="method">
<dt id="music21.base.Music21Object.searchParent">
<tt class="descname">searchParent</tt><big>(</big><em>attrName</em><big>)</big><a class="headerlink" href="#music21.base.Music21Object.searchParent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>If this element is contained within a Stream or other Music21 element, searchParent() permits searching attributes of higher-level objects. The first encountered match is returned, or None if no match.</p>
<dl class="method">
<dt id="music21.base.Music21Object.getContextAttr">
<tt class="descname">getContextAttr</tt><big>(</big><em>attr</em><big>)</big><a class="headerlink" href="#music21.base.Music21Object.getContextAttr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Given the name of an attribute, search Conctexts and return the best match.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="n">attr1</span><span class="o">=</span><span class="mf">234</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span><span class="o">.</span><span class="n">attr1</span> <span class="o">=</span> <span class="s">&#39;test&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">addContext</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">getContextAttr</span><span class="p">(</span><span class="s">&#39;attr1&#39;</span><span class="p">)</span>
<span class="go">&#39;test&#39;</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.Music21Object.setContextAttr">
<tt class="descname">setContextAttr</tt><big>(</big><em>attrName</em>, <em>value</em><big>)</big><a class="headerlink" href="#music21.base.Music21Object.setContextAttr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Given the name of an attribute, search Conctexts and return the best match.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="n">attr1</span><span class="o">=</span><span class="mf">234</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span><span class="o">.</span><span class="n">attr1</span> <span class="o">=</span> <span class="s">&#39;test&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">addContext</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">getContextAttr</span><span class="p">(</span><span class="s">&#39;attr1&#39;</span><span class="p">)</span>
<span class="go">&#39;test&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">setContextAttr</span><span class="p">(</span><span class="s">&#39;attr1&#39;</span><span class="p">,</span> <span class="mf">3000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">getContextAttr</span><span class="p">(</span><span class="s">&#39;attr1&#39;</span><span class="p">)</span>
<span class="go">3000</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.Music21Object.addContext">
<tt class="descname">addContext</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#music21.base.Music21Object.addContext" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Add an ojbect as a context reference, placed with the object&#8217;s DefinedContexts object.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="n">attr1</span><span class="o">=</span><span class="mf">234</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span><span class="o">.</span><span class="n">attr1</span> <span class="o">=</span> <span class="s">&#39;test&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">addContext</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">getContextAttr</span><span class="p">(</span><span class="s">&#39;attr1&#39;</span><span class="p">)</span>
<span class="go">&#39;test&#39;</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.Music21Object.addLocationAndParent">
<tt class="descname">addLocationAndParent</tt><big>(</big><em>offset</em>, <em>parent</em>, <em>parentWeakRef=None</em><big>)</big><a class="headerlink" href="#music21.base.Music21Object.addLocationAndParent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>ADVANCED: a speedup tool that adds a new location element and a new parent.  Called by Stream.insert &#8211; this saves some dual processing.  Does not do safety checks that the siteId doesn&#8217;t already exist etc., because that is done earlier. This speeds up things like stream.getElementsById substantially. Testing script (N.B. manipulates Stream._elements directly &#8211; so not to be emulated)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream</span> <span class="kn">import</span> <span class="n">Stream</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st1</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o1</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st1_wr</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">wrapWeakref</span><span class="p">(</span><span class="n">st1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">offset</span> <span class="o">=</span> <span class="mf">20.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st1</span><span class="o">.</span><span class="n">_elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">o1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o1</span><span class="o">.</span><span class="n">addLocationAndParent</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">st1</span><span class="p">,</span> <span class="n">st1_wr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o1</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="n">st1</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o1</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="n">st1</span><span class="p">)</span>
<span class="go">20.0</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.Music21Object.freezeIds">
<tt class="descname">freezeIds</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.Music21Object.freezeIds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Temporarily replace are stored keys with a different value.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">30.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span><span class="o">.</span><span class="n">addLocationAndParent</span><span class="p">(</span><span class="mf">50</span><span class="p">,</span> <span class="n">aM21Obj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldParentId</span> <span class="o">=</span> <span class="n">bM21Obj</span><span class="o">.</span><span class="n">_currentParentId</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span><span class="o">.</span><span class="n">freezeIds</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newParentId</span> <span class="o">=</span> <span class="n">bM21Obj</span><span class="o">.</span><span class="n">_currentParentId</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldParentId</span> <span class="o">==</span> <span class="n">newParentId</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.Music21Object.getContextByClass">
<tt class="descname">getContextByClass</tt><big>(</big><em>className</em>, <em>serialReverseSearch=True</em>, <em>callerFirst=None</em>, <em>memo=None</em><big>)</big><a class="headerlink" href="#music21.base.Music21Object.getContextByClass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Search both DefinedContexts as well as associated objects to find a matching class. The a reference to the caller is required to find the offset of the object of the caller. This is needed for serialReverseSearch. The caller may be a DefinedContexts reference from a lower-level object. If so, we can access the location of that lower-level object. However, if we need a flat representation, the caller needs to be the source Stream, not its DefinedContexts reference. The callerFirst is the first object from which this method was called. This is needed in order to determine the final offset from which to search.</p>
<dl class="method">
<dt id="music21.base.Music21Object.getOffsetBySite">
<tt class="descname">getOffsetBySite</tt><big>(</big><em>site</em><big>)</big><a class="headerlink" href="#music21.base.Music21Object.getOffsetBySite" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>If this class has been registered in a container such as a Stream, that container can be provided here, and the offset in that object can be returned. Note that this is different than the getOffsetByElement() method on Stream in that this can never access the flat representation of a Stream.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">30.0</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.Music21Object.isClass">
<tt class="descname">isClass</tt><big>(</big><em>className</em><big>)</big><a class="headerlink" href="#music21.base.Music21Object.isClass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>returns bool depending on if the object is a particular class or not here, it just returns isinstance, but for Elements it will return true if the embedded object is of the given class.  Thus, best to use it throughout music21 and only use isinstance if you really want to see if something is an ElementWrapper or not.</p>
<dl class="method">
<dt id="music21.base.Music21Object.show">
<tt class="descname">show</tt><big>(</big><em>fmt=None</em><big>)</big><a class="headerlink" href="#music21.base.Music21Object.show" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Displays an object in a format provided by the fmt argument or, if not provided, the format set in the user&#8217;s Environment</p>
<dl class="method">
<dt id="music21.base.Music21Object.unfreezeIds">
<tt class="descname">unfreezeIds</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.Music21Object.unfreezeIds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Restore keys to be the id() of the object they contain</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">30.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span><span class="o">.</span><span class="n">addLocationAndParent</span><span class="p">(</span><span class="mf">50</span><span class="p">,</span> <span class="n">aM21Obj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldParentId</span> <span class="o">=</span> <span class="n">bM21Obj</span><span class="o">.</span><span class="n">_currentParentId</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span><span class="o">.</span><span class="n">freezeIds</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newParentId</span> <span class="o">=</span> <span class="n">bM21Obj</span><span class="o">.</span><span class="n">_currentParentId</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldParentId</span> <span class="o">==</span> <span class="n">newParentId</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span><span class="o">.</span><span class="n">unfreezeIds</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">postParentId</span> <span class="o">=</span> <span class="n">bM21Obj</span><span class="o">.</span><span class="n">_currentParentId</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldParentId</span> <span class="o">==</span> <span class="n">postParentId</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.Music21Object.unwrapWeakref">
<tt class="descname">unwrapWeakref</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.Music21Object.unwrapWeakref" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Public interface to operation on DefinedContexts.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">30.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">addLocationAndParent</span><span class="p">(</span><span class="mf">50</span><span class="p">,</span> <span class="n">bM21Obj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">unwrapWeakref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.Music21Object.wrapWeakref">
<tt class="descname">wrapWeakref</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.Music21Object.wrapWeakref" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Public interface to operation on DefinedContexts.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bM21Obj</span> <span class="o">=</span> <span class="n">Music21Object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">30</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">30.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">addLocationAndParent</span><span class="p">(</span><span class="mf">50</span><span class="p">,</span> <span class="n">bM21Obj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">unwrapWeakref</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aM21Obj</span><span class="o">.</span><span class="n">wrapWeakref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.Music21Object.write">
<tt class="descname">write</tt><big>(</big><em>fmt=None</em>, <em>fp=None</em><big>)</big><a class="headerlink" href="#music21.base.Music21Object.write" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Write a file. A None file path will result in temporary file</p>
</dd></dl>

</div>
<div class="section" id="elementwrapper">
<h2>ElementWrapper<a class="headerlink" href="#elementwrapper" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="music21.base.ElementWrapper">
<em class="property">
class </em><tt class="descclassname">music21.base.</tt><tt class="descname">ElementWrapper</tt><a class="headerlink" href="#music21.base.ElementWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>An element wraps an object so that the same object can be positioned within a stream. The object is always available as element.obj &#8211; however, calls to the ElementWrapper will call Object is now mandatory &#8211; calls to ElementWrapper without an object fail, because in the new (11/29) object model, ElementWrapper should only be used to wrap an object.</p>
<p>inherits from: <a title="music21.base.Music21Object" class="reference internal" href="#music21.base.Music21Object"><tt class="xref docutils literal"><span class="pre">Music21Object</span></tt></a></p>
<p><strong>ElementWrapper</strong> <strong>attributes</strong></p>
<dl class="attribute">
<dt id="music21.base.ElementWrapper.obj">
<tt class="descname">obj</tt><a class="headerlink" href="#music21.base.ElementWrapper.obj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>No documentation.</p>
<p><strong>ElementWrapper</strong> <strong>properties</strong></p>
<dl class="attribute">
<dt id="music21.base.ElementWrapper.duration">
<tt class="descname">duration</tt><a class="headerlink" href="#music21.base.ElementWrapper.duration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Gets the duration of the ElementWrapper (if separately set), but normal returns the duration of the component object if available, otherwise returns None.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">note</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&#39;F#&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">quarterLength</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">quarterLength</span>
<span class="go">2.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">el1</span> <span class="o">=</span> <span class="n">ElementWrapper</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">el1</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">quarterLength</span>
<span class="go">2.0</span>
<span class="go">ADVANCED FEATURE TO SET DURATION OF ELEMENTS AND STREAMS SEPARATELY</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">KindaStupid</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ks1</span> <span class="o">=</span> <span class="n">ElementWrapper</span><span class="p">(</span><span class="n">KindaStupid</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ks1</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">duration</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="nc">AttributeError</span>: <span class="n-Identifier">&#39;KindaStupid&#39; object has no attribute &#39;duration&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">duration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ks1</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="s">&quot;whole&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ks1</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">quarterLength</span>
<span class="go">4.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ks1</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">duration</span>  <span class="c"># still not defined</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="nc">AttributeError</span>: <span class="n-Identifier">&#39;KindaStupid&#39; object has no attribute &#39;duration&#39;</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="music21.base.ElementWrapper.id">
<tt class="descname">id</tt><a class="headerlink" href="#music21.base.ElementWrapper.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Unique identification string.</p>
<dl class="attribute">
<dt id="music21.base.ElementWrapper.offset">
<tt class="descname">offset</tt><a class="headerlink" href="#music21.base.ElementWrapper.offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Get the offset for the set the parent object.</p>
<p>Properties inherited from <a title="music21.base.Music21Object" class="reference internal" href="#music21.base.Music21Object"><tt class="xref docutils literal"><span class="pre">Music21Object</span></tt></a>: <a title="music21.base.Music21Object.parent" class="reference internal" href="#music21.base.Music21Object.parent"><tt class="xref docutils literal"><span class="pre">parent</span></tt></a>, <a title="music21.base.Music21Object.priority" class="reference internal" href="#music21.base.Music21Object.priority"><tt class="xref docutils literal"><span class="pre">priority</span></tt></a></p>
<p><strong>ElementWrapper</strong> <strong>methods</strong></p>
<dl class="method">
<dt id="music21.base.ElementWrapper.__init__">
<tt class="descname">__init__</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#music21.base.ElementWrapper.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>No documentation.</p>
<dl class="method">
<dt id="music21.base.ElementWrapper.getId">
<tt class="descname">getId</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.ElementWrapper.getId" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>No documentation.</p>
<dl class="method">
<dt id="music21.base.ElementWrapper.isClass">
<tt class="descname">isClass</tt><big>(</big><em>className</em><big>)</big><a class="headerlink" href="#music21.base.ElementWrapper.isClass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Returns true if the object embedded is a particular class. Used by getElementsByClass in Stream</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">note</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">ElementWrapper</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">isClass</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">isClass</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">NoneType</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">ElementWrapper</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&#39;A4&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">isClass</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">isClass</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">NoneType</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.ElementWrapper.isTwin">
<tt class="descname">isTwin</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#music21.base.ElementWrapper.isTwin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>a weaker form of equality.  a.isTwin(b) is true if a and b store either the same object OR objects that are equal and a.groups == b.groups and a.id == b.id (or both are none) and duration are equal. but does not require position, priority, or parent to be the same In other words, is essentially the same object in a different context</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">note</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aE</span> <span class="o">=</span> <span class="n">ElementWrapper</span><span class="p">(</span><span class="n">obj</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&quot;A-&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aE</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="s">&quot;aflat-Note&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aE</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;out-of-range&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aE</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">4.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aE</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mf">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bE</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">aE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aE</span> <span class="ow">is</span> <span class="n">bE</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aE</span> <span class="o">==</span> <span class="n">bE</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aE</span><span class="o">.</span><span class="n">isTwin</span><span class="p">(</span><span class="n">bE</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bE</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">14.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bE</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="o">-</span><span class="mf">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aE</span> <span class="o">==</span> <span class="n">bE</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aE</span><span class="o">.</span><span class="n">isTwin</span><span class="p">(</span><span class="n">bE</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.ElementWrapper.setId">
<tt class="descname">setId</tt><big>(</big><em>newId</em><big>)</big><a class="headerlink" href="#music21.base.ElementWrapper.setId" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>No documentation.</p>
<p>Methods inherited from <a title="music21.base.Music21Object" class="reference internal" href="#music21.base.Music21Object"><tt class="xref docutils literal"><span class="pre">Music21Object</span></tt></a>: <a title="music21.base.Music21Object.searchParent" class="reference internal" href="#music21.base.Music21Object.searchParent"><tt class="xref docutils literal"><span class="pre">searchParent()</span></tt></a>, <a title="music21.base.Music21Object.getContextAttr" class="reference internal" href="#music21.base.Music21Object.getContextAttr"><tt class="xref docutils literal"><span class="pre">getContextAttr()</span></tt></a>, <a title="music21.base.Music21Object.setContextAttr" class="reference internal" href="#music21.base.Music21Object.setContextAttr"><tt class="xref docutils literal"><span class="pre">setContextAttr()</span></tt></a>, <a title="music21.base.Music21Object.addContext" class="reference internal" href="#music21.base.Music21Object.addContext"><tt class="xref docutils literal"><span class="pre">addContext()</span></tt></a>, <a title="music21.base.Music21Object.addLocationAndParent" class="reference internal" href="#music21.base.Music21Object.addLocationAndParent"><tt class="xref docutils literal"><span class="pre">addLocationAndParent()</span></tt></a>, <a title="music21.base.Music21Object.freezeIds" class="reference internal" href="#music21.base.Music21Object.freezeIds"><tt class="xref docutils literal"><span class="pre">freezeIds()</span></tt></a>, <a title="music21.base.Music21Object.getContextByClass" class="reference internal" href="#music21.base.Music21Object.getContextByClass"><tt class="xref docutils literal"><span class="pre">getContextByClass()</span></tt></a>, <a title="music21.base.Music21Object.getOffsetBySite" class="reference internal" href="#music21.base.Music21Object.getOffsetBySite"><tt class="xref docutils literal"><span class="pre">getOffsetBySite()</span></tt></a>, <a title="music21.base.Music21Object.show" class="reference internal" href="#music21.base.Music21Object.show"><tt class="xref docutils literal"><span class="pre">show()</span></tt></a>, <a title="music21.base.Music21Object.unfreezeIds" class="reference internal" href="#music21.base.Music21Object.unfreezeIds"><tt class="xref docutils literal"><span class="pre">unfreezeIds()</span></tt></a>, <a title="music21.base.Music21Object.unwrapWeakref" class="reference internal" href="#music21.base.Music21Object.unwrapWeakref"><tt class="xref docutils literal"><span class="pre">unwrapWeakref()</span></tt></a>, <a title="music21.base.Music21Object.wrapWeakref" class="reference internal" href="#music21.base.Music21Object.wrapWeakref"><tt class="xref docutils literal"><span class="pre">wrapWeakref()</span></tt></a>, <a title="music21.base.Music21Object.write" class="reference internal" href="#music21.base.Music21Object.write"><tt class="xref docutils literal"><span class="pre">write()</span></tt></a></p>
</dd></dl>

</div>
<div class="section" id="definedcontexts">
<h2>DefinedContexts<a class="headerlink" href="#definedcontexts" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="music21.base.DefinedContexts">
<em class="property">
class </em><tt class="descclassname">music21.base.</tt><tt class="descname">DefinedContexts</tt><a class="headerlink" href="#music21.base.DefinedContexts" title="Permalink to this definition">¶</a></dt>
<dd><p>An object, stored within a Music21Object, that provides a collection of objects that may be contextually relevant. Some of these objects are locations; these DefinedContext additional store an offset value, used for determining position within a Stream. DefinedContexts are one of many ways that context can be found; context can also be found through searching (using objects in DefinedContexts). All defined contexts are stored as dictionaries in a dictionary. The outermost dictionary stores objects</p>
<p><strong>DefinedContexts</strong> <strong>methods</strong></p>
<dl class="method">
<dt id="music21.base.DefinedContexts.__init__">
<tt class="descname">__init__</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>No documentation.</p>
<dl class="method">
<dt id="music21.base.DefinedContexts.add">
<tt class="descname">add</tt><big>(</big><em>obj</em>, <em>offset=None</em>, <em>name=None</em>, <em>timeValue=None</em>, <em>idKey=None</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.add" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Add a reference if offset is None, it is interpreted as a context if offset is a value, it is intereted as location NOTE: offset follows obj here, unlike with add() in old DefinedContexts</p>
<dl class="method">
<dt id="music21.base.DefinedContexts.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Clear all stored data.</p>
<dl class="method">
<dt id="music21.base.DefinedContexts.freezeIds">
<tt class="descname">freezeIds</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.freezeIds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Temporarily replace are stored keys with a different value.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldKeys</span> <span class="o">=</span> <span class="n">aContexts</span><span class="o">.</span><span class="n">_definedContexts</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">freezeIds</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newKeys</span> <span class="o">=</span> <span class="n">aContexts</span><span class="o">.</span><span class="n">_definedContexts</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldKeys</span> <span class="o">==</span> <span class="n">newKeys</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.get">
<tt class="descname">get</tt><big>(</big><em>locationsTrail=False</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Get references; unwrap from weakrefs; order, based on dictionary keys, is from most recently added to least recently added. The locationsTrail option forces locations to come after all other defined contexts.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cObj</span><span class="p">,</span> <span class="mf">345</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="p">[</span><span class="n">cObj</span><span class="p">,</span> <span class="n">aObj</span><span class="p">,</span> <span class="n">bObj</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">locationsTrail</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="n">aObj</span><span class="p">,</span> <span class="n">bObj</span><span class="p">,</span> <span class="n">cObj</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.getAttrByName">
<tt class="descname">getAttrByName</tt><big>(</big><em>attrName</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.getAttrByName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Given an attribute name, search all objects and find the first that matches this attribute name; then return a reference to this attribute.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="n">attr1</span><span class="o">=</span><span class="mf">234</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span><span class="o">.</span><span class="n">attr1</span> <span class="o">=</span> <span class="mf">234</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span><span class="o">.</span><span class="n">attr1</span> <span class="o">=</span> <span class="mf">98</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">aContexts</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">getAttrByName</span><span class="p">(</span><span class="s">&#39;attr1&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mf">234</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">removeById</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">aObj</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">getAttrByName</span><span class="p">(</span><span class="s">&#39;attr1&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mf">98</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.getByClass">
<tt class="descname">getByClass</tt><big>(</big><em>className</em>, <em>callerFirst=None</em>, <em>memo=None</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.getByClass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Return the most recently added reference based on className. Class name can be a string or the real class name. This will recursively search the defined contexts of existing defined context. Caller here can be the object that is hosting this DefinedContexts object (such as a Stream). This is necessary when, later on, we need a flat representation. If no caller is provided, the a reference to this DefinedContexts instances is based (from where locations can be looked up if necessary). callerFirst is simply used to pass a reference of the first caller; this is necessary if we are looking within a Stream for a flat offset position.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">getByClass</span><span class="p">(</span><span class="s">&#39;mock&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">aObj</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">getByClass</span><span class="p">(</span><span class="n">Mock</span><span class="p">)</span> <span class="o">==</span> <span class="n">aObj</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.getOffsetByObjectMatch">
<tt class="descname">getOffsetByObjectMatch</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.getOffsetByObjectMatch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>For a given object return the offset using a direct object match.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cParent</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aSite</span><span class="p">,</span> <span class="mf">23</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bSite</span><span class="p">,</span> <span class="mf">121.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="n">aSite</span><span class="p">)</span>
<span class="go">23</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="n">bSite</span><span class="p">)</span>
<span class="go">121.5</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.getOffsetBySite">
<tt class="descname">getOffsetBySite</tt><big>(</big><em>site</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.getOffsetBySite" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>For a given site return its offset.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cParent</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aSite</span><span class="p">,</span> <span class="mf">23</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bSite</span><span class="p">,</span> <span class="mf">121.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="n">aSite</span><span class="p">)</span>
<span class="go">23</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="n">bSite</span><span class="p">)</span>
<span class="go">121.5</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.getOffsetBySiteId">
<tt class="descname">getOffsetBySiteId</tt><big>(</big><em>siteId</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.getOffsetBySiteId" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>For a given site id, return its offset.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cParent</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aSite</span><span class="p">,</span> <span class="mf">23</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bSite</span><span class="p">,</span> <span class="mf">121.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">getOffsetBySiteId</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">aSite</span><span class="p">))</span>
<span class="go">23</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">getOffsetBySiteId</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">bSite</span><span class="p">))</span>
<span class="go">121.5</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.getOffsets">
<tt class="descname">getOffsets</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.getOffsets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Return a list of all offsets.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aSite</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cSite</span><span class="p">)</span> <span class="c"># a context</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bSite</span><span class="p">,</span> <span class="mf">234</span><span class="p">)</span> <span class="c"># can add at same offset or another</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dSite</span><span class="p">)</span> <span class="c"># a context</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">getOffsets</span><span class="p">()</span>
<span class="go">[0, 234]</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.getSiteByOffset">
<tt class="descname">getSiteByOffset</tt><big>(</big><em>offset</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.getSiteByOffset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>For a given offset return the parent # More than one parent may have the same offset; # this can return the last site added by sorting time No - now we use a dict, so there&#8217;s no guarantee that the one you want will be there &#8211; need orderedDicts!</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aSite</span><span class="p">,</span> <span class="mf">23</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bSite</span><span class="p">,</span> <span class="mf">23121.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aSite</span> <span class="o">==</span> <span class="n">aLocations</span><span class="o">.</span><span class="n">getSiteByOffset</span><span class="p">(</span><span class="mf">23</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.getSites">
<tt class="descname">getSites</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.getSites" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Get all defined contexts that are locations; unwrap from weakrefs</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aObj</span><span class="p">,</span> <span class="mf">234</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bObj</span><span class="p">,</span> <span class="mf">3000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">aContexts</span><span class="o">.</span><span class="n">_locationKeys</span><span class="p">)</span> <span class="o">==</span> <span class="mf">2</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">aContexts</span><span class="o">.</span><span class="n">getSites</span><span class="p">())</span> <span class="o">==</span> <span class="mf">2</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.hasSiteId">
<tt class="descname">hasSiteId</tt><big>(</big><em>site</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.hasSiteId" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Return True or False if this DefinedContexts object already has this site defined as a location</p>
<dl class="method">
<dt id="music21.base.DefinedContexts.remove">
<tt class="descname">remove</tt><big>(</big><em>site</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.remove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Remove the entry specified by sites</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aSite</span><span class="p">,</span> <span class="mf">23</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">aContexts</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bSite</span><span class="p">,</span> <span class="mf">233</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">aContexts</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cSite</span><span class="p">,</span> <span class="mf">232223</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">aContexts</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">aSite</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">aContexts</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.removeById">
<tt class="descname">removeById</tt><big>(</big><em>idKey</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.removeById" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>No documentation.</p>
<dl class="method">
<dt id="music21.base.DefinedContexts.setAttrByName">
<tt class="descname">setAttrByName</tt><big>(</big><em>attrName</em>, <em>value</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.setAttrByName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Given an attribute name, search all objects and find the first that matches this attribute name; then return a reference to this attribute.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="n">attr1</span><span class="o">=</span><span class="mf">234</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span><span class="o">.</span><span class="n">attr1</span> <span class="o">=</span> <span class="mf">98</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">setAttrByName</span><span class="p">(</span><span class="s">&#39;attr1&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">getAttrByName</span><span class="p">(</span><span class="s">&#39;attr1&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;test&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.setOffsetBySite">
<tt class="descname">setOffsetBySite</tt><big>(</big><em>site</em>, <em>value</em><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.setOffsetBySite" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Changes the offset of the site specified.  Note that this can also be done with add, but the difference is that if the site is not in DefinedContexts, it will raise an exception.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cSite</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aSite</span><span class="p">,</span> <span class="mf">23</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bSite</span><span class="p">,</span> <span class="mf">121.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">setOffsetBySite</span><span class="p">(</span><span class="n">aSite</span><span class="p">,</span> <span class="mf">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="n">aSite</span><span class="p">)</span>
<span class="go">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aLocations</span><span class="o">.</span><span class="n">setOffsetBySite</span><span class="p">(</span><span class="n">cSite</span><span class="p">,</span> <span class="mf">30</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="nc">RelationsException</span>: <span class="n-Identifier">...</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.unfreezeIds">
<tt class="descname">unfreezeIds</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.unfreezeIds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Restore keys to be the id() of the object they contain</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cObj</span><span class="p">,</span> <span class="mf">200</span><span class="p">)</span> <span class="c"># a location</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldKeys</span> <span class="o">=</span> <span class="n">aContexts</span><span class="o">.</span><span class="n">_definedContexts</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldLocations</span> <span class="o">=</span> <span class="n">aContexts</span><span class="o">.</span><span class="n">_locationKeys</span><span class="p">[:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">freezeIds</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newKeys</span> <span class="o">=</span> <span class="n">aContexts</span><span class="o">.</span><span class="n">_definedContexts</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldKeys</span> <span class="o">==</span> <span class="n">newKeys</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">unfreezeIds</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">postKeys</span> <span class="o">=</span> <span class="n">aContexts</span><span class="o">.</span><span class="n">_definedContexts</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">postKeys</span> <span class="o">==</span> <span class="n">newKeys</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># restored original ids b/c objs are alive</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sorted</span><span class="p">(</span><span class="n">postKeys</span><span class="p">)</span> <span class="o">==</span> <span class="n">sorted</span><span class="p">(</span><span class="n">oldKeys</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oldLocations</span> <span class="o">==</span> <span class="n">aContexts</span><span class="o">.</span><span class="n">_locationKeys</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.unwrapWeakref">
<tt class="descname">unwrapWeakref</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.unwrapWeakref" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Unwrap any and all weakrefs stored.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">common</span><span class="o">.</span><span class="n">isWeakref</span><span class="p">(</span><span class="n">aContexts</span><span class="o">.</span><span class="n">get</span><span class="p">()[</span><span class="mf">0</span><span class="p">])</span> <span class="c"># unwrapping happens</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">common</span><span class="o">.</span><span class="n">isWeakref</span><span class="p">(</span><span class="n">aContexts</span><span class="o">.</span><span class="n">_definedContexts</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">aObj</span><span class="p">)][</span><span class="s">&#39;obj&#39;</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">unwrapWeakref</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">common</span><span class="o">.</span><span class="n">isWeakref</span><span class="p">(</span><span class="n">aContexts</span><span class="o">.</span><span class="n">_definedContexts</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">aObj</span><span class="p">)][</span><span class="s">&#39;obj&#39;</span><span class="p">])</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">common</span><span class="o">.</span><span class="n">isWeakref</span><span class="p">(</span><span class="n">aContexts</span><span class="o">.</span><span class="n">_definedContexts</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">bObj</span><span class="p">)][</span><span class="s">&#39;obj&#39;</span><span class="p">])</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="method">
<dt id="music21.base.DefinedContexts.wrapWeakref">
<tt class="descname">wrapWeakref</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.base.DefinedContexts.wrapWeakref" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Wrap any and all weakrefs stored.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Mock</span><span class="p">(</span><span class="n">Music21Object</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bObj</span> <span class="o">=</span> <span class="n">Mock</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span> <span class="o">=</span> <span class="n">DefinedContexts</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">aObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bObj</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">unwrapWeakref</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aContexts</span><span class="o">.</span><span class="n">wrapWeakref</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">common</span><span class="o">.</span><span class="n">isWeakref</span><span class="p">(</span><span class="n">aContexts</span><span class="o">.</span><span class="n">_definedContexts</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">aObj</span><span class="p">)][</span><span class="s">&#39;obj&#39;</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">common</span><span class="o">.</span><span class="n">isWeakref</span><span class="p">(</span><span class="n">aContexts</span><span class="o">.</span><span class="n">_definedContexts</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">bObj</span><span class="p">)][</span><span class="s">&#39;obj&#39;</span><span class="p">])</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="groups">
<h2>Groups<a class="headerlink" href="#groups" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="music21.base.Groups">
<em class="property">
class </em><tt class="descclassname">music21.base.</tt><tt class="descname">Groups</tt><a class="headerlink" href="#music21.base.Groups" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of strings used to identify associations that an element might have. Enforces that all elements must be strings</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Groups</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
<span class="go">&#39;hello&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">5</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="nc">GroupException</span>: <span class="n-Identifier">Only strings can be used as list names</span>
</pre></div>
</div>
<p>inherits from: list</p>
<p><strong>Groups</strong> <strong>methods</strong></p>
<dl class="method">
<dt id="music21.base.Groups.append">
<tt class="descname">append</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#music21.base.Groups.append" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>No documentation.</p>
<p>Methods inherited from list: <tt class="xref docutils literal"><span class="pre">__init__()</span></tt>, <tt class="xref docutils literal"><span class="pre">count()</span></tt>, <tt class="xref docutils literal"><span class="pre">extend()</span></tt>, <tt class="xref docutils literal"><span class="pre">index()</span></tt>, <tt class="xref docutils literal"><span class="pre">insert()</span></tt>, <tt class="xref docutils literal"><span class="pre">pop()</span></tt>, <tt class="xref docutils literal"><span class="pre">remove()</span></tt>, <tt class="xref docutils literal"><span class="pre">reverse()</span></tt>, <tt class="xref docutils literal"><span class="pre">sort()</span></tt></p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="moduleClef.html" title="music21.clef"
             >next</a> |</li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             >previous</a> |</li>
        <li><a href="contents.html">music21 v0.2.4a1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009-2010 The music21 Project.
      Last updated on Mar 17, 2010.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>