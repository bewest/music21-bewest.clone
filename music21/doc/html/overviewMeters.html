<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Overview: Meters, Time Signatures, and Processing Beams, Accents, and Beats &mdash; music21 v0.2.4a2 documentation</title>
    <link rel="stylesheet" href="_static/music21doc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2.4a2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="music21 v0.2.4a2 documentation" href="index.html" />
    <link rel="next" title="Examples and Demonstrations" href="examples.html" />
    <link rel="prev" title="Overview: Post-Tonal Tools" href="overviewPostTonal.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples and Demonstrations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overviewPostTonal.html" title="Overview: Post-Tonal Tools"
             accesskey="P">previous</a> |</li>
        <li><a href="contents.html">music21 v0.2.4a2 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Overview: Meters, Time Signatures, and Processing Beams, Accents, and Beats</a><ul>
<li><a class="reference external" href="#basic-time-signature">Basic Time Signature</a><ul>
<li><a class="reference external" href="#getting-time-signatures-from-parts-and-measures">Getting Time Signatures From Parts and Measures</a></li>
<li><a class="reference external" href="#setting-a-time-signature-in-a-measure">Setting a Time Signature in a Measure</a></li>
<li><a class="reference external" href="#rebaring-with-changing-time-signature">Rebaring with Changing Time Signature</a></li>
<li><a class="reference external" href="#finding-the-beat-of-a-note-in-a-measure">Finding the Beat of a Note in a Measure</a></li>
</ul>
</li>
<li><a class="reference external" href="#objects-for-organizing-hierarchical-partitions">Objects for Organizing Hierarchical Partitions</a><ul>
<li><a class="reference external" href="#creating-and-editing-meterterminal-objects">Creating and Editing MeterTerminal Objects</a></li>
<li><a class="reference external" href="#creating-and-editing-metersequence-objects">Creating and Editing MeterSequence Objects</a></li>
</ul>
</li>
<li><a class="reference external" href="#advanced-time-signature-configuration">Advanced Time Signature Configuration</a></li>
<li><a class="reference external" href="#configuring-display">Configuring Display</a></li>
<li><a class="reference external" href="#configuring-beam">Configuring Beam</a></li>
<li><a class="reference external" href="#configuring-beat">Configuring Beat</a><ul>
<li><a class="reference external" href="#annotating-found-notes-with-beat-count">Annotating Found Notes with Beat Count</a></li>
<li><a class="reference external" href="#using-beat-depth-to-provide-metrical-analysis">Using Beat Depth to Provide Metrical Analysis</a></li>
</ul>
</li>
<li><a class="reference external" href="#configuring-accent">Configuring Accent</a><ul>
<li><a class="reference external" href="#applying-articulations-based-on-accent">Applying Articulations Based on Accent</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="overviewPostTonal.html"
                                  title="previous chapter">Overview: Post-Tonal Tools</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="examples.html"
                                  title="next chapter">Examples and Demonstrations</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/overviewMeters.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overview-meters-time-signatures-and-processing-beams-accents-and-beats">
<span id="overviewmeters"></span><h1>Overview: Meters, Time Signatures, and Processing Beams, Accents, and Beats<a class="headerlink" href="#overview-meters-time-signatures-and-processing-beams-accents-and-beats" title="Permalink to this headline">¶</a></h1>
<p>Meters and time signatures are represented in music21 as groups of nested hierarchical structures. In many cases, the default configuration of a music21 <a title="music21.meter.TimeSignature" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature"><tt class="xref docutils literal"><span class="pre">TimeSignature</span></tt></a> object will do what you want. However, by configuring the fundamental component objects, the <a title="music21.meter.MeterTerminal" class="reference external" href="moduleMeter.html#music21.meter.MeterTerminal"><tt class="xref docutils literal"><span class="pre">MeterTerminal</span></tt></a> and <a title="music21.meter.MeterSequence" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence"><tt class="xref docutils literal"><span class="pre">MeterSequence</span></tt></a> objects, a wide range of options are available.</p>
<p>The <a title="music21.meter.TimeSignature" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature"><tt class="xref docutils literal"><span class="pre">TimeSignature</span></tt></a> object additionally features numerous high-level methods to provide access to and configuration of display, beaming, beat, and accent information.</p>
<p>This overview will illustrate key features of music21&#8217;s meter objects. For complete documentation of these objects, see <a class="reference external" href="moduleMeter.html#modulemeter"><em>music21.meter</em></a>.</p>
<p>For a more formal discussion of these designs, see the paper &#8220;Modeling Beats, Accents, Beams, and Time Signatures Hierarchically with music21 Meter Objects&#8221; (Ariza and Cuthbert 2010), at the following URL: <a class="reference external" href="http://mit.edu/music21/papers/2010MeterObjects.pdf">http://mit.edu/music21/papers/2010MeterObjects.pdf</a></p>
<div class="section" id="basic-time-signature">
<h2>Basic Time Signature<a class="headerlink" href="#basic-time-signature" title="Permalink to this headline">¶</a></h2>
<p>While the full structure and configuration options of TimeSignature objects will be discussed below, a few quick demonstrations will get you up and running quickly with the many common tasks.</p>
<div class="section" id="getting-time-signatures-from-parts-and-measures">
<h3>Getting Time Signatures From Parts and Measures<a class="headerlink" href="#getting-time-signatures-from-parts-and-measures" title="Permalink to this headline">¶</a></h3>
<p>In general, <a title="music21.meter.TimeSignature" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature"><tt class="xref docutils literal"><span class="pre">TimeSignature</span></tt></a> objects are found within <a title="music21.stream.Measure" class="reference external" href="moduleStream.html#music21.stream.Measure"><tt class="xref docutils literal"><span class="pre">Measure</span></tt></a> objects (a Stream subclass). However, in some cases <a title="music21.meter.TimeSignature" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature"><tt class="xref docutils literal"><span class="pre">TimeSignature</span></tt></a> objects can exist directly on a Stream.</p>
<p>TimeSignature objects, as a subclass of the <a title="music21.base.Music21Object" class="reference external" href="moduleBase.html#music21.base.Music21Object"><tt class="xref docutils literal"><span class="pre">Music21Object</span></tt></a>, have an offset and can be positioned anywhere on a Stream. When placed in a Measure, TimeSignature objects are often placed at the start, or zero offset position. The Measure property <a title="music21.stream.Measure.timeSignature" class="reference external" href="moduleStream.html#music21.stream.Measure.timeSignature"><tt class="xref docutils literal"><span class="pre">timeSignature</span></tt></a> can be used to set or get a TimeSignature at the zero offset position. If a Measure does not have a TimeSignature, the <a title="music21.stream.Measure.timeSignature" class="reference external" href="moduleStream.html#music21.stream.Measure.timeSignature"><tt class="xref docutils literal"><span class="pre">timeSignature</span></tt></a> property returns None.</p>
<p>In the following example, a score is parsed from the <a class="reference external" href="moduleCorpusBase.html#modulecorpus-base"><em>music21.corpus.base</em></a> module <a title="music21.corpus.base.parseWork" class="reference external" href="moduleCorpusBase.html#music21.corpus.base.parseWork"><tt class="xref docutils literal"><span class="pre">parseWork()</span></tt></a> function. The alto <a title="music21.stream.Part" class="reference external" href="moduleStream.html#music21.stream.Part"><tt class="xref docutils literal"><span class="pre">Part</span></tt></a> Stream is accessed by its identification string, &#8216;Alto,&#8217; using the <a title="music21.stream.Stream.getElementById" class="reference external" href="moduleStream.html#music21.stream.Stream.getElementById"><tt class="xref docutils literal"><span class="pre">getElementById()</span></tt></a> method. We can produce notation output of this Part by calling the <a title="music21.base.Music21Object.show" class="reference external" href="moduleBase.html#music21.base.Music21Object.show"><tt class="xref docutils literal"><span class="pre">show()</span></tt></a> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sSrc</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">parseWork</span><span class="p">(</span><span class="s">&#39;bach/bwv57.8.xml&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span> <span class="o">=</span> <span class="n">sSrc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&#39;Alto&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-09.png" src="_images/overviewMeters-09.png" style="width: 600px;" />
<p>To examine the <a title="music21.meter.TimeSignature" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature"><tt class="xref docutils literal"><span class="pre">TimeSignature</span></tt></a> object active for this part, there are a few approaches. One method is to simply search for the class within all objects in the Part, or the flattened Part Stream representation. Remember that a Part is generally built of Measures, or Stream-embedded containers. To get all the elements in the Stream we can use the <a title="music21.stream.Stream.flat" class="reference external" href="moduleStream.html#music21.stream.Stream.flat"><tt class="xref docutils literal"><span class="pre">flat</span></tt></a> property, and then search for a class with the <a title="music21.stream.Stream.getElementsByClass" class="reference external" href="moduleStream.html#music21.stream.Stream.getElementsByClass"><tt class="xref docutils literal"><span class="pre">getElementsByClass()</span></tt></a> method. This returns a new Stream containing all found classes. The first element in this Stream is the TimeSignature.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">)[</span><span class="mf">0</span><span class="p">]</span>
<span class="go">&lt;music21.meter.TimeSignature 3/4&gt;</span>
</pre></div>
</div>
<p>Alternatively, we can look at the first Measure in the Stream, and examine the <a title="music21.stream.Measure.timeSignature" class="reference external" href="moduleStream.html#music21.stream.Measure.timeSignature"><tt class="xref docutils literal"><span class="pre">timeSignature</span></tt></a> property. Notice that the second Measure does not have a TimeSignature.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">timeSignature</span>
<span class="go">&lt;music21.meter.TimeSignature 3/4&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">.</span><span class="n">timeSignature</span> <span class="o">==</span> <span class="bp">None</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-a-time-signature-in-a-measure">
<h3>Setting a Time Signature in a Measure<a class="headerlink" href="#setting-a-time-signature-in-a-measure" title="Permalink to this headline">¶</a></h3>
<p>We can create a new TimeSignature object by providing a string representation of the meter. In most cases, intuitive string-based time signature representations will give you the expected results. Assigning a new TimeSignature object, however, simple associated it with a Measure: it will not automatically rebar or reposition notes within bars. For example, the same part examined above can be modified. Here, the first Measure&#8217;s <a title="music21.stream.Measure.timeSignature" class="reference external" href="moduleStream.html#music21.stream.Measure.timeSignature"><tt class="xref docutils literal"><span class="pre">timeSignature</span></tt></a> property is set to a new object. Note that, when viewing the Part, the time signature is changed even though the position of the notes in Measures is not changed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">timeSignature</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;5/4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-10.png" src="_images/overviewMeters-10.png" style="width: 600px;" />
</div>
<div class="section" id="rebaring-with-changing-time-signature">
<h3>Rebaring with Changing Time Signature<a class="headerlink" href="#rebaring-with-changing-time-signature" title="Permalink to this headline">¶</a></h3>
<p>To actually change the position of the notes, creating new Measures with new TimeSignatures, we need to rebar the music. The simplest way to do this is to get all the notes from a Part using the <a title="music21.stream.Stream.notes" class="reference external" href="moduleStream.html#music21.stream.Stream.notes"><tt class="xref docutils literal"><span class="pre">notes</span></tt></a> property on a flat Stream representation. Then, by inserting a new TimeSignature at the start of this Stream using the <a title="music21.stream.Stream.insert" class="reference external" href="moduleStream.html#music21.stream.Stream.insert"><tt class="xref docutils literal"><span class="pre">insert()</span></tt></a> method, we can generate new notation with the show() method. Note that here we are not creating Measures directly; instead, we are assigning TimeSignature objects into a Stream of notes. When the show() method is called, Measures are created within a temporary Stream according to the relevant TimeSignature objects.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span> <span class="o">=</span> <span class="n">sPart</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;2/4&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-11.png" src="_images/overviewMeters-11.png" style="width: 600px;" />
<p>The <a title="music21.stream.Stream.notes" class="reference external" href="moduleStream.html#music21.stream.Stream.notes"><tt class="xref docutils literal"><span class="pre">notes</span></tt></a> property, while useful, only gathers Notes, Rests, or other subclasses of <a title="music21.note.GeneralNote" class="reference external" href="moduleNote.html#music21.note.GeneralNote"><tt class="xref docutils literal"><span class="pre">GeneralNote</span></tt></a>. Notice that, in the above example, the <a title="music21.key.KeySignature" class="reference external" href="moduleKey.html#music21.key.KeySignature"><tt class="xref docutils literal"><span class="pre">KeySignature</span></tt></a> and <tt class="xref docutils literal"><span class="pre">Insturment</span></tt> objects, as apparent in the notation, have been removed.</p>
<p>If we want to get all elements in the Stream except those that are a specific class, the <a title="music21.stream.Stream.getElementsByNotClass" class="reference external" href="moduleStream.html#music21.stream.Stream.getElementsByNotClass"><tt class="xref docutils literal"><span class="pre">getElementsByNotClass()</span></tt></a> method can be used. In the example below, we gather all elements that are not TimeSignature objects, and then assign a new TimeSignature to the new Stream.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span> <span class="o">=</span> <span class="n">sPart</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByNotClass</span><span class="p">(</span><span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;2/4&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-16.png" src="_images/overviewMeters-16.png" style="width: 600px;" />
<p>We can continue to add multiple TimeSignature objects to this Stream of Notes. First, we will replace the 2/4 bar previously added with a new TimeSignature, using the Stream <a title="music21.stream.Stream.replace" class="reference external" href="moduleStream.html#music21.stream.Stream.replace"><tt class="xref docutils literal"><span class="pre">replace()</span></tt></a> method. Then, we will insert a number of additional TimeSignature objects at offsets further into the Stream. Again, as this Stream has no Measures, temporary Measures are automatically created when calling the show() method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">sNew</span><span class="o">.</span><span class="n">getTimeSignatures</span><span class="p">()[</span><span class="mf">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span>
<span class="go">&lt;music21.meter.TimeSignature 2/4&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;5/8&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;7/8&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">17</span><span class="p">,</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;9/8&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">26</span><span class="p">,</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;3/8&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-12.png" src="_images/overviewMeters-12.png" style="width: 600px;" />
<p>If we wanted to apply this sequence of TimeSignature objects to a complete score, we can extract all the TimeSignature objects from our new Stream with the <a title="music21.stream.Stream.getTimeSignatures" class="reference external" href="moduleStream.html#music21.stream.Stream.getTimeSignatures"><tt class="xref docutils literal"><span class="pre">getTimeSignatures()</span></tt></a> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tsStream</span> <span class="o">=</span> <span class="n">sNew</span><span class="o">.</span><span class="n">getTimeSignatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tsStream</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="go">{0.0} &lt;music21.meter.TimeSignature 5/8&gt;</span>
<span class="go">{10.0} &lt;music21.meter.TimeSignature 7/8&gt;</span>
<span class="go">{17.0} &lt;music21.meter.TimeSignature 9/8&gt;</span>
<span class="go">{26.0} &lt;music21.meter.TimeSignature 3/8&gt;</span>
</pre></div>
</div>
<p>We can then iterate through the Part objects in the source Stream, get a flat representation of notes, and use the <a title="music21.stream.Stream.makeMeasures" class="reference external" href="moduleStream.html#music21.stream.Stream.makeMeasures"><tt class="xref docutils literal"><span class="pre">makeMeasures()</span></tt></a> method to create new Parts. The <a title="music21.stream.Stream.makeMeasures" class="reference external" href="moduleStream.html#music21.stream.Stream.makeMeasures"><tt class="xref docutils literal"><span class="pre">makeMeasures()</span></tt></a> method can take an optional Stream of TimeSignature objects that are used to configure the making of Measures.</p>
<p>After Measure creation, Notes need to be split and extend with ties. the Stream <a title="music21.stream.Stream.makeTies" class="reference external" href="moduleStream.html#music21.stream.Stream.makeTies"><tt class="xref docutils literal"><span class="pre">makeTies()</span></tt></a> method can be used. These new Parts can be added to a new Stream and displayed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sRebar</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">sSrc</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">newPart</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span><span class="o">.</span><span class="n">makeMeasures</span><span class="p">(</span><span class="n">tsStream</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">newPart</span><span class="o">.</span><span class="n">makeTies</span><span class="p">(</span><span class="n">inPlace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">sRebar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">newPart</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sRebar</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-13.png" src="_images/overviewMeters-13.png" style="width: 600px;" />
</div>
<div class="section" id="finding-the-beat-of-a-note-in-a-measure">
<h3>Finding the Beat of a Note in a Measure<a class="headerlink" href="#finding-the-beat-of-a-note-in-a-measure" title="Permalink to this headline">¶</a></h3>
<p>If a Note is in a Measure, and that Measure or a preceding Measure has a TimeSignature, it is possible to find the beat, or the position of the Note in terms of the count of whole or fractional subdivisions of top-level beat partitions.</p>
<p>The Note <a title="music21.note.GeneralNote.beat" class="reference external" href="moduleNote.html#music21.note.GeneralNote.beat"><tt class="xref docutils literal"><span class="pre">beat</span></tt></a> property will return, if available, a numerical representation of the beat, with a floating point value corresponding to the proportional position through the beat. The Note <a title="music21.note.GeneralNote.beatStr" class="reference external" href="moduleNote.html#music21.note.GeneralNote.beatStr"><tt class="xref docutils literal"><span class="pre">beatStr</span></tt></a> property returns a string representation, replacing floating point values with fractions when available.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sSrc</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">parseWork</span><span class="p">(</span><span class="s">&#39;bach/bwv57.8.xml&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span> <span class="o">=</span> <span class="n">sSrc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&#39;Soprano&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
<span class="go">&lt;music21.note.Note B-&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span><span class="o">.</span><span class="n">beat</span>
<span class="go">2.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span><span class="o">.</span><span class="n">beatStr</span>
<span class="go">&#39;2 1/2&#39;</span>
</pre></div>
</div>
<p>We can annotate each Note in the Part with the string returned by <a title="music21.note.GeneralNote.beatStr" class="reference external" href="moduleNote.html#music21.note.GeneralNote.beatStr"><tt class="xref docutils literal"><span class="pre">beatStr</span></tt></a> using the Note <a title="music21.note.GeneralNote.addLyric" class="reference external" href="moduleNote.html#music21.note.GeneralNote.addLyric"><tt class="xref docutils literal"><span class="pre">addLyric</span></tt></a> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">sPart</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">n</span><span class="o">.</span><span class="n">addLyric</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">beatStr</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-14.png" src="_images/overviewMeters-14.png" style="width: 600px;" />
<p>If we change the TimeSignature in a Part, the beat counts will reflect this change. For example, if the Bass part of the same chorale is re-barred in 6/8, new, syncopated beat counts will be given.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sPart</span> <span class="o">=</span> <span class="n">sSrc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&#39;Alto&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sMeasures</span> <span class="o">=</span> <span class="n">sPart</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span><span class="o">.</span><span class="n">makeMeasures</span><span class="p">(</span><span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;6/8&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sMeasures</span><span class="o">.</span><span class="n">makeTies</span><span class="p">(</span><span class="n">inPlace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">sMeasures</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">n</span><span class="o">.</span><span class="n">addLyric</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">beatStr</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sMeasures</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-15.png" src="_images/overviewMeters-15.png" style="width: 600px;" />
</div>
</div>
<div class="section" id="objects-for-organizing-hierarchical-partitions">
<h2>Objects for Organizing Hierarchical Partitions<a class="headerlink" href="#objects-for-organizing-hierarchical-partitions" title="Permalink to this headline">¶</a></h2>
<p>Hierarchical metrical structures can be described as a type of fractional, space-preserving tree structure. With such a structure we partition and divide a single duration into one or more parts, where each part is a fraction of the whole. Each part can, in turn, be similarly divided. The objects for configuring this structure are the MeterTerminal and the MeterSequence objects.</p>
<p>MeterTerminal and the MeterSequence objects are for advanced configuration. For basic data access about common meters, see the discussion of TimeSignature, below.</p>
<div class="section" id="creating-and-editing-meterterminal-objects">
<h3>Creating and Editing MeterTerminal Objects<a class="headerlink" href="#creating-and-editing-meterterminal-objects" title="Permalink to this headline">¶</a></h3>
<p>A MeterTerminal is a node of the metrical tree structure, defined as a duration expressed as a fraction of a whole note. Thus, 1/4 is 1 quarter length (QL) duration; 3/8 is 1.5 QL; 3/16 is 0.75 QL. For this model, denominators are limited to <em>n</em> = 2 <sup>x</sup>, for <em>x</em> between 1 and 7 (e.g. 1/1 to 1/128).</p>
<p>MeterTerminals can additionally store a weight, or a numerical value that can be interpreted in a variety of different ways.</p>
<p>The following examples in the Python interpreter demonstrate creating a MeterTerminal and accessing the <a title="music21.meter.MeterTerminal.numerator" class="reference external" href="moduleMeter.html#music21.meter.MeterTerminal.numerator"><tt class="xref docutils literal"><span class="pre">numerator</span></tt></a> and <a title="music21.meter.MeterTerminal.denominator" class="reference external" href="moduleMeter.html#music21.meter.MeterTerminal.denominator"><tt class="xref docutils literal"><span class="pre">denominator</span></tt></a> attributes. The  <a title="music21.meter.MeterTerminal.duration" class="reference external" href="moduleMeter.html#music21.meter.MeterTerminal.duration"><tt class="xref docutils literal"><span class="pre">duration</span></tt></a> attribute stores a <a title="music21.duration.Duration" class="reference external" href="moduleDuration.html#music21.duration.Duration"><tt class="xref docutils literal"><span class="pre">Duration</span></tt></a> object.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="n">meter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mt</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">MeterTerminal</span><span class="p">(</span><span class="s">&#39;3/4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mt</span>
<span class="go">&lt;MeterTerminal 3/4&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mt</span><span class="o">.</span><span class="n">numerator</span><span class="p">,</span> <span class="n">mt</span><span class="o">.</span><span class="n">denominator</span>
<span class="go">(3, 4)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mt</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">quarterLength</span>
<span class="go">3.0</span>
</pre></div>
</div>
<p>A MeterTerminal can be broken into an ordered sequence of MeterTerminal objects that sum to the same duration. This new object, to be discussed below, is the MeterSequence. A MeterTerminal can be broken into these duration-preserving components with the <a title="music21.meter.MeterTerminal.subdivide" class="reference external" href="moduleMeter.html#music21.meter.MeterTerminal.subdivide"><tt class="xref docutils literal"><span class="pre">subdivide()</span></tt></a> method. An argument for subdivision can be given as a desired number of equal-valued components, a list of numerators assuming equal-denominators, or a list of string fraction representations.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mt</span><span class="o">.</span><span class="n">subdivide</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span>
<span class="go">&lt;MeterSequence {1/4+1/4+1/4}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mt</span><span class="o">.</span><span class="n">subdivide</span><span class="p">([</span><span class="mf">3</span><span class="p">,</span><span class="mf">3</span><span class="p">])</span>
<span class="go">&lt;MeterSequence {3/8+3/8}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mt</span><span class="o">.</span><span class="n">subdivide</span><span class="p">([</span><span class="s">&#39;1/4&#39;</span><span class="p">,</span><span class="s">&#39;4/8&#39;</span><span class="p">])</span>
<span class="go">&lt;MeterSequence {1/4+4/8}&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-and-editing-metersequence-objects">
<h3>Creating and Editing MeterSequence Objects<a class="headerlink" href="#creating-and-editing-metersequence-objects" title="Permalink to this headline">¶</a></h3>
<p>A MeterSequence object is a sub-class of a MeterTerminal. Like a MeterTerminal, a MeterSequence has a <a title="music21.meter.MeterSequence.numerator" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.numerator"><tt class="xref docutils literal"><span class="pre">numerator</span></tt></a>, a <a title="music21.meter.MeterSequence.denominator" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.denominator"><tt class="xref docutils literal"><span class="pre">denominator</span></tt></a>, and a <tt class="xref docutils literal"><span class="pre">duration</span></tt> attribute. A MeterSequence, however, can be a hierarchical tree or sub-tree, containing an ordered sequence of MeterTerminal and/or MeterSequence objects.</p>
<p>The ordered collection of MeterTerminal and/or MeterSequence objects can be accessed like Python lists. MeterSequence objects, like MeterTerminal objects, store a weight that by default is the sum of constituent weights.</p>
<p>The <a title="music21.meter.MeterSequence.partition" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.partition"><tt class="xref docutils literal"><span class="pre">partition()</span></tt></a> and <a title="music21.meter.MeterTerminal.subdivide" class="reference external" href="moduleMeter.html#music21.meter.MeterTerminal.subdivide"><tt class="xref docutils literal"><span class="pre">subdivide()</span></tt></a> methods can be used to configure the nested hierarchical structure.</p>
<p>The <a title="music21.meter.MeterSequence.partition" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.partition"><tt class="xref docutils literal"><span class="pre">partition()</span></tt></a> method replaces existing MeterTerminal or MeterSequence objects in place with a new arrangement, specified as a desired number of equal-valued components, a list of numerators assuming equal-denominators, or a list of string fraction representations.</p>
<p>The <a title="music21.meter.MeterTerminal.subdivide" class="reference external" href="moduleMeter.html#music21.meter.MeterTerminal.subdivide"><tt class="xref docutils literal"><span class="pre">subdivide()</span></tt></a> method returns a new MeterSequence (leaving the source MeterSequence unchanged) with an arrangement of MeterTerminals as specified by an argument in the same form as for the <a title="music21.meter.MeterSequence.partition" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.partition"><tt class="xref docutils literal"><span class="pre">partition()</span></tt></a> method.</p>
<p>Note that MeterTerminal objects cannot be partitioned in place. A common way to convert a MeterTerminal into a MeterSequence is to reassign the returned MeterSequence from the <a title="music21.meter.MeterTerminal.subdivide" class="reference external" href="moduleMeter.html#music21.meter.MeterTerminal.subdivide"><tt class="xref docutils literal"><span class="pre">subdivide()</span></tt></a> method to the position occupied by the MeterTerminal.</p>
<p>The following example creates and partitions a MeterSequence by re-assigning subdivisions to MeterTerminal objects. The use of Python list-like index access is also demonstrated.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">MeterSequence</span><span class="p">(</span><span class="s">&#39;3/4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span>
<span class="go">&lt;MeterSequence {3/4}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">partition</span><span class="p">([</span><span class="mf">3</span><span class="p">,</span><span class="mf">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span>
<span class="go">&lt;MeterSequence {3/8+3/8}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
<span class="go">&lt;MeterTerminal 3/8&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ms</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">subdivide</span><span class="p">([</span><span class="mf">3</span><span class="p">,</span><span class="mf">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
<span class="go">&lt;MeterSequence {3/16+3/16}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span>
<span class="go">&lt;MeterSequence {{3/16+3/16}+3/8}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">ms</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">.</span><span class="n">subdivide</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="mf">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="p">[</span><span class="mf">1</span><span class="p">][</span><span class="mf">0</span><span class="p">]</span>
<span class="go">&lt;MeterTerminal 1/8&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<span class="go">&lt;MeterSequence {1/8+1/8+1/8}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span>
<span class="go">&lt;MeterSequence {{3/16+3/16}+{1/8+1/8+1/8}}&gt;</span>
</pre></div>
</div>
<p>The resulting structure can be graphically displayed with the following diagram:</p>
<img alt="_images/overviewMeters-02.png" src="_images/overviewMeters-02.png" style="width: 300px;" />
<p>Numerous MeterSequence attributes provide convenient ways to access information about, or new objects from, the nested tree structure. The <a title="music21.meter.MeterSequence.depth" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.depth"><tt class="xref docutils literal"><span class="pre">depth</span></tt></a> attribute returns the depth count at any node within the tree structure; the <a title="music21.meter.MeterSequence.flat" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.flat"><tt class="xref docutils literal"><span class="pre">flat</span></tt></a> property returns a new, flat MeterSequence constructed from all the lowest-level MeterTerminal objects (all leaf nodes).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">depth</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">depth</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">flat</span>
<span class="go">&lt;MeterSequence {3/16+3/16+1/8+1/8+1/8}&gt;</span>
</pre></div>
</div>
<p>Numerous methods provide ways to access levels (slices) of the hierarchical structure, or all nodes found at a desired hierarchical level. As all components preserve the duration of their container, all levels have the same total duration. The <a title="music21.meter.MeterSequence.getLevel" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.getLevel"><tt class="xref docutils literal"><span class="pre">getLevel()</span></tt></a> method returns, for a given depth, a new, flat MeterSequence. The <a title="music21.meter.MeterSequence.getLevelSpan" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.getLevelSpan"><tt class="xref docutils literal"><span class="pre">getLevelSpan()</span></tt></a> method returns, for a given depth, the time span of each node as a list of start and end values.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">getLevel</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
<span class="go">&lt;MeterSequence {3/8+3/8}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">getLevel</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="go">&lt;MeterSequence {3/16+3/16+1/8+1/8+1/8}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">getLevelSpan</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="go">[(0.0, 0.75), (0.75, 1.5), (1.5, 2.0), (2.0, 2.5), (2.5, 3.0)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">.</span><span class="n">getLevelSpan</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="go">[(0.0, 0.5), (0.5, 1.0), (1.0, 1.5)]</span>
</pre></div>
</div>
<p>Finally, numerous methods provide ways to find and access the relevant nodes (the MeterTerminal or MeterSequence objects) active given a quarter length position into the tree structure. The <a title="music21.meter.MeterSequence.positionToIndex" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.positionToIndex"><tt class="xref docutils literal"><span class="pre">positionToIndex()</span></tt></a> method returns, for a given QL, the index of the active node. The <a title="music21.meter.MeterSequence.positionToSpan" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.positionToSpan"><tt class="xref docutils literal"><span class="pre">positionToSpan()</span></tt></a> method returns, for a given QL, the span of the active node. The <a title="music21.meter.MeterSequence.positionToDepth" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.positionToDepth"><tt class="xref docutils literal"><span class="pre">positionToDepth()</span></tt></a> method returns, for a given QL, the maximum depth at this position.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">positionToIndex</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">positionToSpan</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>
<span class="go">(1.5, 3.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">positionToDepth</span><span class="p">(</span><span class="o">.</span><span class="mf">5</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">positionToDepth</span><span class="p">(</span><span class="o">.</span><span class="mf">5</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">getLevel</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="o">.</span><span class="n">positionToSpan</span><span class="p">(</span><span class="o">.</span><span class="mf">5</span><span class="p">)</span>
<span class="go">(0, 0.75)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="advanced-time-signature-configuration">
<h2>Advanced Time Signature Configuration<a class="headerlink" href="#advanced-time-signature-configuration" title="Permalink to this headline">¶</a></h2>
<p>The music21 <a title="music21.meter.TimeSignature" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature"><tt class="xref docutils literal"><span class="pre">TimeSignature</span></tt></a> object contains four parallel MeterSequence objects, each assigned to the attributes <a title="music21.meter.TimeSignature.display" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.display"><tt class="xref docutils literal"><span class="pre">display</span></tt></a>, <a title="music21.meter.TimeSignature.beat" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beat"><tt class="xref docutils literal"><span class="pre">beat</span></tt></a>, <a title="music21.meter.TimeSignature.beam" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beam"><tt class="xref docutils literal"><span class="pre">beam</span></tt></a>, <a title="music21.meter.TimeSignature.accent" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.accent"><tt class="xref docutils literal"><span class="pre">accent</span></tt></a>. The following displays a graphical realization of these four MeterSequence objects.</p>
<img alt="_images/overviewMeters-01.png" src="_images/overviewMeters-01.png" style="width: 400px;" />
<p>The TimeSignature provides a model of all common hierarchical structures contained within a bar. Common meters are initialized with expected defaults; however, full MeterSequence customization is available.</p>
</div>
<div class="section" id="configuring-display">
<h2>Configuring Display<a class="headerlink" href="#configuring-display" title="Permalink to this headline">¶</a></h2>
<p>The TimeSignature <a title="music21.meter.TimeSignature.display" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.display"><tt class="xref docutils literal"><span class="pre">display</span></tt></a> MeterSequence employs the highest-level partitions to configure the displayed time signature symbol. If more than one partition is given, those partitions will be interpreted as additive meter components. If partitions have a common denominator, a summed numerator (over a single denominator) can be displayed by setting the TimeSignature <tt class="xref docutils literal"><span class="pre">summedNumerator</span></tt> attribute to True. Lower-level subdivisions of the TimeSignature MeterSequence are not employed.</p>
<p>Note that a new MeterSequence instance can be assigned to the <a title="music21.meter.TimeSignature.display" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.display"><tt class="xref docutils literal"><span class="pre">display</span></tt></a> attribute with a duration and/or partitioning completely independent from the <a title="music21.meter.TimeSignature.beat" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beat"><tt class="xref docutils literal"><span class="pre">beat</span></tt></a>, <a title="music21.meter.TimeSignature.beam" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beam"><tt class="xref docutils literal"><span class="pre">beam</span></tt></a>, and <a title="music21.meter.TimeSignature.accent" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.accent"><tt class="xref docutils literal"><span class="pre">accent</span></tt></a> MeterSequences.</p>
<p>The following example demonstrates setting the display MeterSequence for a TimeSignature:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ts1</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;5/8&#39;</span><span class="p">)</span> <span class="c"># assumes two partitions</span>
<span class="n">ts1</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">partition</span><span class="p">([</span><span class="s">&#39;3/16&#39;</span><span class="p">,</span><span class="s">&#39;1/8&#39;</span><span class="p">,</span><span class="s">&#39;5/16&#39;</span><span class="p">])</span>

<span class="n">ts2</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;5/8&#39;</span><span class="p">)</span> <span class="c"># assumes two partitions</span>
<span class="n">ts2</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">partition</span><span class="p">([</span><span class="s">&#39;2/8&#39;</span><span class="p">,</span> <span class="s">&#39;3/8&#39;</span><span class="p">])</span>
<span class="n">ts2</span><span class="o">.</span><span class="n">summedNumerator</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="k">for</span> <span class="n">ts</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">]:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Measure</span><span class="p">()</span>
    <span class="n">m</span><span class="o">.</span><span class="n">timeSignature</span> <span class="o">=</span> <span class="n">ts</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">)</span>
    <span class="n">n</span><span class="o">.</span><span class="n">quarterLength</span> <span class="o">=</span> <span class="mf">0.5</span>
    <span class="n">m</span><span class="o">.</span><span class="n">repeatAppend</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mf">5</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;musicxml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-08.png" src="_images/overviewMeters-08.png" style="width: 400px;" />
</div>
<div class="section" id="configuring-beam">
<h2>Configuring Beam<a class="headerlink" href="#configuring-beam" title="Permalink to this headline">¶</a></h2>
<p>The TimeSignature <a title="music21.meter.TimeSignature.beam" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beam"><tt class="xref docutils literal"><span class="pre">beam</span></tt></a> MeterSequence employs the complete hierarchical structure to configure the single or multi-level beaming of a bar. The outer-most partitions can specify one or more top-level partitions. Lower-level partitions subdivide beam-groups, providing the appropriate beam-breaks when sufficiently small durations are employed.</p>
<p>The <a title="music21.meter.TimeSignature.beam" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beam"><tt class="xref docutils literal"><span class="pre">beam</span></tt></a> MeterSequence is generally used to create and configure <tt class="xref docutils literal"><span class="pre">Beams</span></tt> objects stored in <a title="music21.note.Note" class="reference external" href="moduleNote.html#music21.note.Note"><tt class="xref docutils literal"><span class="pre">Note</span></tt></a> objects. The TimeSignature <a title="music21.meter.TimeSignature.getBeams" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.getBeams"><tt class="xref docutils literal"><span class="pre">getBeams()</span></tt></a> method, given a list of <a title="music21.duration.Duration" class="reference external" href="moduleDuration.html#music21.duration.Duration"><tt class="xref docutils literal"><span class="pre">Duration</span></tt></a> objects, returns a list of <tt class="xref docutils literal"><span class="pre">Beams</span></tt> objects based on the TimeSignature  <a title="music21.meter.TimeSignature.beam" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beam"><tt class="xref docutils literal"><span class="pre">beam</span></tt></a> MeterSequence.</p>
<p>Many users may find the Stream <a title="music21.stream.Stream.makeBeams" class="reference external" href="moduleStream.html#music21.stream.Stream.makeBeams"><tt class="xref docutils literal"><span class="pre">makeBeams()</span></tt></a> method the most convenient way to apply beams to a Measure or Stream of Note objects. This method returns a new Stream with created and configured Beams.</p>
<p>The following example beams a bar of 3/4 in four different ways. The diversity and complexity of beaming is offered here to illustrate the flexibility of this model:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ts1</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;3/4&#39;</span><span class="p">)</span>
<span class="n">ts1</span><span class="o">.</span><span class="n">beam</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="n">ts1</span><span class="o">.</span><span class="n">beam</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts1</span><span class="o">.</span><span class="n">beam</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">subdivide</span><span class="p">([</span><span class="s">&#39;3/8&#39;</span><span class="p">,</span> <span class="s">&#39;5/32&#39;</span><span class="p">,</span> <span class="s">&#39;4/32&#39;</span><span class="p">,</span> <span class="s">&#39;3/32&#39;</span><span class="p">])</span>

<span class="n">ts2</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;3/4&#39;</span><span class="p">)</span>
<span class="n">ts2</span><span class="o">.</span><span class="n">beam</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span>

<span class="n">ts3</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;3/4&#39;</span><span class="p">)</span>
<span class="n">ts3</span><span class="o">.</span><span class="n">beam</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ts3</span><span class="o">.</span><span class="n">beam</span><span class="p">)):</span>
    <span class="n">ts3</span><span class="o">.</span><span class="n">beam</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts3</span><span class="o">.</span><span class="n">beam</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">subdivide</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>

<span class="n">ts4</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;3/4&#39;</span><span class="p">)</span>
<span class="n">ts4</span><span class="o">.</span><span class="n">beam</span><span class="o">.</span><span class="n">partition</span><span class="p">([</span><span class="s">&#39;3/8&#39;</span><span class="p">,</span> <span class="s">&#39;3/8&#39;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ts4</span><span class="o">.</span><span class="n">beam</span><span class="p">)):</span>
    <span class="n">ts4</span><span class="o">.</span><span class="n">beam</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts4</span><span class="o">.</span><span class="n">beam</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">subdivide</span><span class="p">([</span><span class="s">&#39;6/32&#39;</span><span class="p">,</span> <span class="s">&#39;6/32&#39;</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ts4</span><span class="o">.</span><span class="n">beam</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
        <span class="n">ts4</span><span class="o">.</span><span class="n">beam</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts4</span><span class="o">.</span><span class="n">beam</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">subdivide</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="k">for</span> <span class="n">ts</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">ts3</span><span class="p">,</span> <span class="n">ts4</span><span class="p">]:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Measure</span><span class="p">()</span>
    <span class="n">m</span><span class="o">.</span><span class="n">timeSignature</span> <span class="o">=</span> <span class="n">ts</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">)</span>
    <span class="n">n</span><span class="o">.</span><span class="n">quarterLength</span> <span class="o">=</span> <span class="mf">0.125</span>
    <span class="n">m</span><span class="o">.</span><span class="n">repeatAppend</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mf">24</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">makeBeams</span><span class="p">())</span>
<span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-04.png" src="_images/overviewMeters-04.png" style="width: 400px;" />
<p>The following is a fractional grid representation of the four beam partitions created.</p>
<img alt="_images/overviewMeters-03.png" src="_images/overviewMeters-03.png" style="width: 300px;" />
</div>
<div class="section" id="configuring-beat">
<h2>Configuring Beat<a class="headerlink" href="#configuring-beat" title="Permalink to this headline">¶</a></h2>
<p>The TimeSignature <a title="music21.meter.TimeSignature.beat" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beat"><tt class="xref docutils literal"><span class="pre">beat</span></tt></a> MeterSequence employs the hierarchical structure to define the beats and beat divisions of a bar. The outer-most partitions can specify one ore more top level beats. Inner partitions can specify the beat division partitions. For most common meters, beats and beat divisions are pre-configured by default.</p>
<p>In the following example, a simple and a compound meter is created, and the default beat partitions are examined. The <a title="music21.meter.MeterSequence.getLevel" class="reference external" href="moduleMeter.html#music21.meter.MeterSequence.getLevel"><tt class="xref docutils literal"><span class="pre">getLevel()</span></tt></a> method can be used to show the beat and background beat partitions. The timeSignature <a title="music21.meter.TimeSignature.beatDuration" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beatDuration"><tt class="xref docutils literal"><span class="pre">beatDuration</span></tt></a>,  <a title="music21.meter.TimeSignature.beatCount" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beatCount"><tt class="xref docutils literal"><span class="pre">beatCount</span></tt></a>, and <a title="music21.meter.TimeSignature.beatCountName" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beatCountName"><tt class="xref docutils literal"><span class="pre">beatCountName</span></tt></a> properties can be used to return commonly needed beat information. The TimeSignature <a title="music21.meter.TimeSignature.beatDivisionCount" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beatDivisionCount"><tt class="xref docutils literal"><span class="pre">beatDivisionCount</span></tt></a>, and <a title="music21.meter.TimeSignature.beatDivisionCountName" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beatDivisionCountName"><tt class="xref docutils literal"><span class="pre">beatDivisionCountName</span></tt></a> properties can be used to return commonly needed beat division information. These descriptors can be combined to return a string representation of the TimeSignature classification with <a title="music21.meter.TimeSignature.classification" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.classification"><tt class="xref docutils literal"><span class="pre">classification</span></tt></a> property.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;3/4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">getLevel</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
<span class="go">&lt;MeterSequence {1/4+1/4+1/4}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">getLevel</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="go">&lt;MeterSequence {1/8+1/8+1/8+1/8+1/8+1/8}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beatDuration</span>
<span class="go">&lt;music21.duration.Duration 1.0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beatCount</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beatCountName</span>
<span class="go">&#39;Triple&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beatDivisionCount</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beatDivisionCountName</span>
<span class="go">&#39;Simple&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">classification</span>
<span class="go">&#39;Simple Triple&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;12/16&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">getLevel</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
<span class="go">&lt;MeterSequence {3/16+3/16+3/16+3/16}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">getLevel</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="go">&lt;MeterSequence {1/16+1/16+1/16+1/16+1/16+1/16+1/16+1/16+1/16+1/16+1/16+1/16}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beatDuration</span>
<span class="go">&lt;music21.duration.Duration 0.75&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beatCount</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beatCountName</span>
<span class="go">&#39;Quadruple&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beatDivisionCount</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">beatDivisionCountName</span>
<span class="go">&#39;Compound&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">classification</span>
<span class="go">&#39;Compound Quadruple&#39;</span>
</pre></div>
</div>
<div class="section" id="annotating-found-notes-with-beat-count">
<h3>Annotating Found Notes with Beat Count<a class="headerlink" href="#annotating-found-notes-with-beat-count" title="Permalink to this headline">¶</a></h3>
<p>The <a title="music21.meter.TimeSignature.getBeat" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.getBeat"><tt class="xref docutils literal"><span class="pre">getBeat()</span></tt></a> method returns the currently active beat given a quarter length position into the TimeSignature.</p>
<p>In the following example, all leading tones, or C#s, are collected into a new Stream and displayed with annotations for part, measure, and beat:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">music21</span>
<span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="n">corpus</span><span class="p">,</span> <span class="n">meter</span><span class="p">,</span> <span class="n">stream</span>

<span class="n">score</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">parseWork</span><span class="p">(</span><span class="s">&#39;bach/bwv366.xml&#39;</span><span class="p">)</span>
<span class="n">ts</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span>
    <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">)[</span><span class="mf">0</span><span class="p">]</span>
<span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span>

<span class="n">found</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="n">offsetQL</span> <span class="o">=</span> <span class="mf">0</span>
<span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">score</span><span class="p">:</span>
    <span class="n">found</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">offsetQL</span><span class="p">,</span>
        <span class="n">part</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span>
        <span class="n">music21</span><span class="o">.</span><span class="n">clef</span><span class="o">.</span><span class="n">Clef</span><span class="p">)[</span><span class="mf">0</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">measures</span><span class="p">)):</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;C#&#39;</span><span class="p">:</span>
                <span class="n">n</span><span class="o">.</span><span class="n">addLyric</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">, m. </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">id</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">measureNumber</span><span class="p">))</span>
                <span class="n">n</span><span class="o">.</span><span class="n">addLyric</span><span class="p">(</span><span class="s">&#39;beat </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span>
                    <span class="n">ts</span><span class="o">.</span><span class="n">getBeat</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">offset</span><span class="p">))</span>
                <span class="n">found</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">offsetQL</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
                <span class="n">offsetQL</span> <span class="o">+=</span> <span class="mf">4</span>

<span class="n">found</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;musicxml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-06.png" src="_images/overviewMeters-06.png" style="width: 400px;" />
</div>
<div class="section" id="using-beat-depth-to-provide-metrical-analysis">
<h3>Using Beat Depth to Provide Metrical Analysis<a class="headerlink" href="#using-beat-depth-to-provide-metrical-analysis" title="Permalink to this headline">¶</a></h3>
<p>Another application of the <a title="music21.meter.TimeSignature.beat" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beat"><tt class="xref docutils literal"><span class="pre">beat</span></tt></a> MeterSequence is to define the hierarchical depth active for a given note found within the TimeSignature.</p>
<p>The <a title="music21.meter.TimeSignature.getBeatDepth" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.getBeatDepth"><tt class="xref docutils literal"><span class="pre">getBeatDepth()</span></tt></a> method, when set with the optional parameter <cite>aligh</cite> to &#8220;quantize&#8221;, shows the number of hierarchical levels that start at or before that point. This value is described by Lerdahl and Jackendoff as metrical analysis.</p>
<p>In the following example, <a title="music21.meter.TimeSignature.beat" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.beat"><tt class="xref docutils literal"><span class="pre">beat</span></tt></a> MeterSequence is partitioned first into one subdivision, and then each subsequent subdivision into two, down to four layers of partitioning.</p>
<p>The number of hierarchical levels, found with the <a title="music21.meter.TimeSignature.getBeatDepth" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.getBeatDepth"><tt class="xref docutils literal"><span class="pre">getBeatDepth()</span></tt></a> method, is appended to each note with the <tt class="xref docutils literal"><span class="pre">addLyric()</span></tt> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">music21</span>
<span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="n">corpus</span><span class="p">,</span> <span class="n">meter</span>

<span class="n">score</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">parseWork</span><span class="p">(</span><span class="s">&#39;bach/bwv281.xml&#39;</span><span class="p">)</span>
<span class="n">partBass</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&#39;Bass&#39;</span><span class="p">)</span>
<span class="n">ts</span> <span class="o">=</span> <span class="n">partBass</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span>
     <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">)[</span><span class="mf">0</span><span class="p">]</span>

<span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="p">)):</span>
    <span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="p">[</span><span class="n">h</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="p">[</span><span class="n">h</span><span class="p">]</span><span class="o">.</span><span class="n">subdivide</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="p">[</span><span class="n">h</span><span class="p">])):</span>
        <span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> \
            <span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">subdivide</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="n">i</span><span class="p">])):</span>
            <span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> \
                <span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">subdivide</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>

<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">partBass</span><span class="o">.</span><span class="n">measures</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">getBeatDepth</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">offset</span><span class="p">)):</span>
            <span class="n">n</span><span class="o">.</span><span class="n">addLyric</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)</span>

<span class="n">partBass</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="mf">0</span><span class="p">:</span><span class="mf">7</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;musicxml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-07.png" src="_images/overviewMeters-07.png" style="width: 400px;" />
<p>Alternatively, this type of annotation can be applied to a Stream using the <a title="music21.analysis.metrical.labelBeatDepth" class="reference external" href="moduleAnalysisMetrical.html#music21.analysis.metrical.labelBeatDepth"><tt class="xref docutils literal"><span class="pre">labelBeatDepth()</span></tt></a> function.</p>
</div>
</div>
<div class="section" id="configuring-accent">
<h2>Configuring Accent<a class="headerlink" href="#configuring-accent" title="Permalink to this headline">¶</a></h2>
<p>The TimeSignature <a title="music21.meter.TimeSignature.accent" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.accent"><tt class="xref docutils literal"><span class="pre">accent</span></tt></a> MeterSequence defines one or more levels of hierarchical accent levels, where quantitative accent value is encoded in MeterTerminal or MeterSequence with a number assigned to the <a title="music21.meter.MeterTerminal.weight" class="reference external" href="moduleMeter.html#music21.meter.MeterTerminal.weight"><tt class="xref docutils literal"><span class="pre">weight</span></tt></a> attribute.</p>
<div class="section" id="applying-articulations-based-on-accent">
<h3>Applying Articulations Based on Accent<a class="headerlink" href="#applying-articulations-based-on-accent" title="Permalink to this headline">¶</a></h3>
<p>The <a title="music21.meter.TimeSignature.getAccentWeight" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.getAccentWeight"><tt class="xref docutils literal"><span class="pre">getAccentWeight()</span></tt></a> method returns the currently active accent weight given a quarter length position into the TimeSignature. Combined with the <a title="music21.meter.TimeSignature.getBeatProgress" class="reference external" href="moduleMeter.html#music21.meter.TimeSignature.getBeatProgress"><tt class="xref docutils literal"><span class="pre">getBeatProgress()</span></tt></a> method, Notes that start on particular beat can be isolated and examined.</p>
<p>The following example extracts the Bass line of a Bach chorale in 3/4 and, after repartitioning the beat and accent attributes, applies accents to reflect a meter of 6/8:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="n">corpus</span><span class="p">,</span> <span class="n">meter</span><span class="p">,</span> <span class="n">articulations</span>

<span class="n">score</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">parseWork</span><span class="p">(</span><span class="s">&#39;bach/bwv366.xml&#39;</span><span class="p">)</span>
<span class="n">partBass</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&#39;Bass&#39;</span><span class="p">)</span>

<span class="n">ts</span> <span class="o">=</span> <span class="n">partBass</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">)[</span><span class="mf">0</span><span class="p">]</span>
<span class="n">ts</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">partition</span><span class="p">([</span><span class="s">&#39;3/8&#39;</span><span class="p">,</span> <span class="s">&#39;3/8&#39;</span><span class="p">])</span>
<span class="n">ts</span><span class="o">.</span><span class="n">accent</span><span class="o">.</span><span class="n">partition</span><span class="p">([</span><span class="s">&#39;3/8&#39;</span><span class="p">,</span> <span class="s">&#39;3/8&#39;</span><span class="p">])</span>
<span class="n">ts</span><span class="o">.</span><span class="n">setAccentWeight</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span> <span class="o">.</span><span class="mf">5</span><span class="p">])</span>

<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">partBass</span><span class="o">.</span><span class="n">measures</span><span class="p">:</span>
    <span class="n">lastBeat</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
        <span class="n">beat</span><span class="p">,</span> <span class="n">progress</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">getBeatProgress</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">beat</span> <span class="o">!=</span> <span class="n">lastBeat</span> <span class="ow">and</span> <span class="n">progress</span> <span class="o">==</span> <span class="mf">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">tie</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">n</span><span class="o">.</span><span class="n">tie</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s">&#39;stop&#39;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">ts</span><span class="o">.</span><span class="n">getAccentWeight</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span> <span class="o">==</span> <span class="mf">1</span><span class="p">:</span>
                <span class="n">mark</span> <span class="o">=</span> <span class="n">articulations</span><span class="o">.</span><span class="n">StrongAccent</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">ts</span><span class="o">.</span><span class="n">getAccentWeight</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span> <span class="o">==</span> <span class="o">.</span><span class="mf">5</span><span class="p">:</span>
                <span class="n">mark</span> <span class="o">=</span> <span class="n">articulations</span><span class="o">.</span><span class="n">Accent</span><span class="p">()</span>
            <span class="n">n</span><span class="o">.</span><span class="n">articulations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mark</span><span class="p">)</span>
            <span class="n">lastBeat</span> <span class="o">=</span> <span class="n">beat</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">sorted</span>

<span class="n">partBass</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="mf">0</span><span class="p">:</span><span class="mf">8</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;musicxml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/overviewMeters-05.png" src="_images/overviewMeters-05.png" style="width: 400px;" />
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples and Demonstrations"
             >next</a> |</li>
        <li class="right" >
          <a href="overviewPostTonal.html" title="Overview: Post-Tonal Tools"
             >previous</a> |</li>
        <li><a href="contents.html">music21 v0.2.4a2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009-2010 The music21 Project.
      Last updated on Jun 11, 2010.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>